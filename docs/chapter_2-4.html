<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>XIAO: Big Power, Small Board - 2.4 Rhythmic Dance with a Triaxial Accelerometer</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapter_3.html" rel="next">
<link href="./chapter_2-3.html" rel="prev">
<link href="./cover.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">XIAO: Big Power, Small Board</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto tools-wide">
    <a href="https://github.com/Mjrovai/XIAO_Big_Power_Small_Board-ebook" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./XIAO–Big-Power,-Small-Board.pdf" rel="" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapter_2.html">Chapter 2: Project Practice for Beginners - Introduction to Prototype Design</a></li><li class="breadcrumb-item"><a href="./chapter_2-4.html">2.4 Rhythmic Dance with a Triaxial Accelerometer</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Acknowledgements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Acknowledgments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about_book.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About this Book</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./chapter_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 1: Introduction to Hardware and Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_1-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.1 First Arduino program with Seeed Studio XIAO: Blink</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_1-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.2 Using the Button Switch on the XIAO Expansion Board to Control an LED Light</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_1-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.3 Transforming XIAO and its Expansion Board into a Morse Code Transmitter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_1-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.4 Monitor Knob Value Changes with Serial Monitor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_1-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.5 Controlling LED and Servo with a Knob</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_1-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1.6 Displaying “Hello World” on OLED</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./chapter_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 2: Project Practice for Beginners - Introduction to Prototype Design</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_2-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.1 Introduction to Product Prototype Design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_2-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.2 Smart Hygrometer and Thermometer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_2-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.3 Surprise Gift Box Based on Light Sensor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_2-4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2.4 Rhythmic Dance with a Triaxial Accelerometer</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./chapter_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 3: Intermediate Project Practice - Complex Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_3-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.1 Smart Remote Control Door</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_3-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.2 Smart Watch</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_3-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.3 Air Piano</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_3-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.4 Implementing Wi-Fi Connection and Applications with XIAO ESP32C3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_3-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3.5 Telemetry and Commands using the MQTT protocol with XIAO ESP32C3</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./chapter_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 4: Project Practice Advanced - TinyML Applications</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_4-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.1 Understanding TinyML and Edge Impulse Studio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_4-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.2 Anomaly Detection &amp; Motion Classification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_4-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.3 Sound Classification (KWS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_4-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.4 Image Classification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_4-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.5 Object Detection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_4-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4.6 To learn more</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./chapter_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 5: Creative Experiments</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_5-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5.1 Creative and useful XIAO projects</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about_authors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the authors</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#background-knowledge" id="toc-background-knowledge" class="nav-link active" data-scroll-target="#background-knowledge">2.4.1 Background Knowledge</a>
  <ul class="collapse">
  <li><a href="#triaxial-accelerometer" id="toc-triaxial-accelerometer" class="nav-link" data-scroll-target="#triaxial-accelerometer"><strong>2.4.1.1 Triaxial Accelerometer</strong></a></li>
  </ul></li>
  <li><a href="#task1-reading-values-from-the-xyz-axes-of-the-three-axis-accelerometer" id="toc-task1-reading-values-from-the-xyz-axes-of-the-three-axis-accelerometer" class="nav-link" data-scroll-target="#task1-reading-values-from-the-xyz-axes-of-the-three-axis-accelerometer">2.4.2 Task1: Reading Values from the XYZ Axes of the Three-Axis Accelerometer</a></li>
  <li><a href="#project-production-rhythmic-dance" id="toc-project-production-rhythmic-dance" class="nav-link" data-scroll-target="#project-production-rhythmic-dance">2.4.3 Project Production: Rhythmic Dance</a>
  <ul class="collapse">
  <li><a href="#project-description" id="toc-project-description" class="nav-link" data-scroll-target="#project-description">Project Description</a></li>
  <li><a href="#program-writing" id="toc-program-writing" class="nav-link" data-scroll-target="#program-writing">Program Writing</a></li>
  <li><a href="#task-control-rgb-led-strip-to-change-light-effects-via-three-axis-accelerometer" id="toc-task-control-rgb-led-strip-to-change-light-effects-via-three-axis-accelerometer" class="nav-link" data-scroll-target="#task-control-rgb-led-strip-to-change-light-effects-via-three-axis-accelerometer">Task: Control RGB LED Strip to Change Light Effects via Three-Axis Accelerometer</a></li>
  </ul></li>
  <li><a href="#exterior-design" id="toc-exterior-design" class="nav-link" data-scroll-target="#exterior-design">2.4.4 <strong>Exterior Design</strong></a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/Mjrovai/XIAO_Big_Power_Small_Board-ebook/edit/main/chapter_2-4.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/Mjrovai/XIAO_Big_Power_Small_Board-ebook/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/Mjrovai/XIAO_Big_Power_Small_Board-ebook/blob/main/chapter_2-4.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2.4 Rhythmic Dance with a Triaxial Accelerometer</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><br> When we use smartphones or tablets, we notice that the screen display automatically flips depending on whether the device is vertical or horizontal. In racing or flying games, phones and tablets can be used as steering wheels, with turning accomplished by tilting the device. Increasingly popular drones, for the most part, can now fly more and more steadily by detecting and controlling the attitude of the aircraft. All of these feats are thanks to the triaxial accelerometer. In this section, we will learn to use programming to retrieve data from a triaxial accelerometer and use this data for display and control.</p>
<section id="background-knowledge" class="level2">
<h2 class="anchored" data-anchor-id="background-knowledge">2.4.1 Background Knowledge</h2>
<section id="triaxial-accelerometer" class="level3">
<h3 class="anchored" data-anchor-id="triaxial-accelerometer"><strong>2.4.1.1 Triaxial Accelerometer</strong></h3>
<p>As people pay more and more attention to their health, an increasing number of people are starting to wear wristbands, pedometers, or use smartphones to record their steps, which has become a lifestyle habit for many. So how exactly does a pedometer work? The answer lies in a tiny chip called a triaxial accelerometer which is usually found in modern phones or wristbands and is the key component in step counting. An accelerometer is a sensor capable of measuring acceleration. It usually consists of a mass, a damper, an elastic element, a sensitive element, and an adjustment circuit. During acceleration, the sensor measures the inertial force applied to the mass, and uses Newton’s second law to determine acceleration. Depending on the different sensitive elements of the sensor, common accelerometers include capacitive, inductive, strain, piezoresistive, piezoelectric, and others.</p>
<!-- ![](https://cdn.nlark.com/yuque/0/2020/png/2392200/1604365221866-e28bdbe1-7358-4e59-a781-1cd1e5a8573b.png#averageHue=%23666467&height=329&id=ezQEb&originHeight=994&originWidth=1904&originalType=binary&ratio=1&rotation=0&showTitle=false&size=0&status=done&style=none&title=&width=630) -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_1.png" class="img-fluid"></p>
<p>The capacitive accelerometer, based on the principle of capacitance, is a common type of accelerometer and is indispensable in certain fields, such as safety airbags, mobile devices like phones, etc. Capacitive accelerometers employ Micro-Electro-Mechanical Systems (MEMS) technology, which makes them very economical when mass-produced, thus ensuring low cost.</p>
<section id="applications-of-accelerometers" class="level4">
<h4 class="anchored" data-anchor-id="applications-of-accelerometers"><strong>Applications of Accelerometers </strong></h4>
<p>Accelerometers can help robots understand their environment. Are they climbing a hill? Or going downhill, or have they fallen? For balance cars or drones, accelerometers can help them maintain balance. In addition to everyday areas like smartphones and health wristbands, accelerometers have also found wide application in other fields.</p>
<ul>
<li><strong>Accelerometers in seismic probe design:</strong> Seismic detectors are special sensors used for geological exploration and engineering measurements. They are sensors that convert ground vibration into electrical signals, turning ground movement caused by seismic waves into electrical signals, which are then converted into binary data through an analog/digital converter, organized, stored, and processed.</li>
</ul>
<!-- ![image.png](https://cdn.nlark.com/yuque/0/2020/png/2392200/1604365995285-acfa2051-9c64-4ff5-9bcc-a65883097c06.png#averageHue=%23726635&height=601&id=zFeHZ&originHeight=601&originWidth=602&originalType=binary&ratio=1&rotation=0&showTitle=false&size=928311&status=done&style=none&title=&width=602) <https://www.directindustry-china.cn/prod/sercel-inc/product-137881-1920062.html> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_2.png" class="img-fluid"></p>
<ul>
<li><strong>Monitoring high-voltage line dancing</strong>: Currently, domestic monitoring of line dancing mainly adopts two main technical schemes: video image acquisition and motion acceleration measurement. The former requires high reliability and stability of video equipment under high-temperature, high-humidity, severe cold, dense fog, dust storms, and other weather conditions, and the effects of the video images taken will also be affected. Hence, it can only serve as auxiliary monitoring means and cannot quantitatively analyze line motion parameters. Using an accelerometer to monitor line dancing allows for quantitative analysis of the up-and-down vibration and left-right swing of transmission lines at a certain point, but it can only measure the amplitude and frequency of line linear motion and not accurately measure complex circular motion.</li>
</ul>
<!-- ![高压线.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604366123235-46c60ad0-1b98-4051-b9ab-aa7478e491d1.jpeg#averageHue=%23393f3c&height=650&id=d1bh5&originHeight=6000&originWidth=4000&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3037463&status=done&style=none&title=&width=433) <https://www.pexels.com/zh-cn/photo/4221070/> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_3.jpg" class="img-fluid"></p>
<ul>
<li><strong>Automotive Safety</strong>: Accelerometers are mainly used in automotive safety airbags, anti-lock braking systems, traction control systems, and other safety features. In safety applications, the rapid response of the accelerometer is crucial. It must be quickly determined when a safety airbag should deploy, so the accelerometer must respond instantly. A sensor design that can quickly reach a stable state rather than continuing to vibrate can shorten the device’s response time.</li>
</ul>
<!-- ![汽车安全.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604366298517-16cf85aa-5920-441f-a57b-bc4fa890d77c.jpeg#averageHue=%234b6063&height=1116&id=ZIbBM&originHeight=4464&originWidth=2976&originalType=binary&ratio=1&rotation=0&showTitle=false&size=806489&status=done&style=none&title=&width=744) <https://www.pexels.com/zh-cn/photo/2526127/> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_4.jpg" class="img-fluid"></p>
<ul>
<li><strong>Drones</strong>: Accelerometers are also key components of drone control, positioning, and stability.</li>
</ul>
<!-- ![无人机.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604366388508-6f53ae66-3425-4e7c-be2e-0403bc1bed99.jpeg#averageHue=%23726e4d&height=3441&id=MvbC9&originHeight=3441&originWidth=5216&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2796584&status=done&style=none&title=&width=5216) <https://www.pexels.com/zh-cn/photo/dji-mavic-pro-2393537/> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_5.jpg" class="img-fluid"></p>
<ul>
<li><strong>Game Control</strong>: Accelerometers can detect changes in the tilt angles up, down, left, and right, so it becomes straightforward to control the directions of objects in games by tilting handheld devices forward and backward. Many new game console controllers and VR device controllers incorporate accelerometers.</li>
</ul>
<!-- ![Photo by Eugene Capon from Pexels.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604366685400-0925b366-723c-4a30-b5a0-be6bbe45d9cf.jpeg#averageHue=%235f4b85&height=2760&id=OKsrv&originHeight=2760&originWidth=4912&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1237813&status=done&style=none&title=&width=4912) <https://www.pexels.com/photo/man-using-virtual-reality-headset-doing-an-action-1261820/> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_6.jpg" class="img-fluid"></p>
<ul>
<li><strong>Image Auto-flip</strong>: Accelerometers detect the rotation movements and directions of handheld devices, making the displayed images upright.</li>
</ul>
<!-- ![pexels-plann-4549416.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604366926989-940e87b6-94fb-4127-b5f1-f984bc6d8002.jpeg#averageHue=%23c6c7cb&height=6678&id=KCsyR&originHeight=6678&originWidth=4452&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3428946&status=done&style=none&title=&width=4452) <https://www.pexels.com/photo/person-holding-smartphone-4549416/> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_7.jpg" class="img-fluid"></p>
<ul>
<li><strong>Compensation for GPS Navigation System Blind Spots</strong>: GPS systems determine an object’s location by receiving signals from three satellites distributed at 120 degrees. In special circumstances and terrains, like tunnels, dense buildings, jungle areas, GPS signals may weaken or even be completely lost, creating blind spots. By adding an accelerometer and using inertial navigation we previously mentioned, we can measure system dead zones. By integrating the accelerometer once, we change it into the speed change per unit time, thereby measuring the movement of an object in the dead zone.</li>
</ul>
<!-- ![pexels-pixabay-33488.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604367065581-b89e8b4a-8636-4e89-8e2d-a5b085490589.jpeg#averageHue=%238a9c9e&height=3456&id=BzCyl&originHeight=3456&originWidth=4608&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1379295&status=done&style=none&title=&width=4608) <https://www.pexels.com/photo/smartphone-car-technology-phone-33488/> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_8.jpg" class="img-fluid"></p>
<ul>
<li><strong>Pedometer Function</strong>: Accelerometers can detect AC signals and object vibrations. When people walk, they produce regular vibrations, and the accelerometer can detect the zero crossing of the vibrations, thereby calculating the number of steps walked or run, and thus calculating the displacement moved by the person. Using certain formulas, we can also calculate the calories burned.</li>
</ul>
<!-- ![pexels-cottonbro-5081922.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604367179041-b381f909-b5e6-4f8f-bf47-d9e71c1834dd.jpeg#averageHue=%232a3234&height=4160&id=ThdMy&originHeight=4160&originWidth=6240&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2981868&status=done&style=none&title=&width=6240) <https://www.pexels.com/photo/black-smart-watch-at-10-54-5081922/> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_9.jpg" class="img-fluid"></p>
<ul>
<li><strong>Image Stabilization and Shooting Stabilizers</strong>: The image stabilization function uses an accelerometer to detect the vibration/swing amplitude of handheld devices, and when the vibration/swing amplitude is too large, it locks the camera shutter to ensure the images taken are always clear. The shooting stabilizer uses an accelerometer to maintain the stability of the entire device.</li>
</ul>
<!-- ![pexels-just-name-1051544.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604367343159-0c56a5c8-ea29-43ab-b195-1a38c898bf0a.jpeg#averageHue=%23caccc5&height=3744&id=qwGVw&originHeight=3744&originWidth=5616&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1105439&status=done&style=none&title=&width=5616) <https://www.pexels.com/photo/person-holding-black-dslr-camera-1051544/> -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_10.jpg" class="img-fluid"></p>
<ul>
<li><strong>Hard Drive Protection</strong>: By detecting the state of free fall with an accelerometer, necessary protection can be implemented for hard drives. It is well known that when a hard drive is reading data, the gap between the read/write head and the platter is minuscule, and even minor external vibrations can have severe consequences for the hard drive, leading to data loss. By using an accelerometer, the state of free fall can be detected. When the state of free fall is detected, the read/write head is reset to reduce the extent of hard drive damage.</li>
</ul>
<!-- ![pexels-pixabay-33278.jpg](https://cdn.nlark.com/yuque/0/2020/jpeg/2392200/1604368036141-65b929d2-b837-49a6-aced-8a62317af8d3.jpeg#averageHue=%23484933&height=3648&id=J5QF8&originHeight=3648&originWidth=5472&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2699837&status=done&style=none&title=&width=5472) <https://www.pexels.com/photo/silver-hard-drive-interals-33278/>  -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_11.jpg" class="img-fluid"></p>
</section>
<section id="grove-three-axis-accelerometer" class="level4">
<h4 class="anchored" data-anchor-id="grove-three-axis-accelerometer"><strong>Grove Three-Axis Accelerometer </strong></h4>
<p>In our kit, we have a three-axis accelerometer module - <a href="https://www.seeedstudio.com/Grove-3-Axis-Digital-Accelerometer-LIS3DHTR-p-4533.html">Grove Three-Axis Accelerometer Module</a>. This tiny, incredible three-axis accelerometer supports I2C, SPI, and ADC GPIO interfaces, which means you can choose any way to connect to your development board. Additionally, the accelerometer can also monitor the surrounding temperature to adjust for errors caused by it.</p>
<!-- ![image.png](https://cdn.nlark.com/yuque/0/2021/png/2746511/1614952888738-91bc6821-b45a-4224-91c9-745c0306ace8.png#averageHue=%23fcfcfc&height=204&id=rv8Xa&originHeight=525&originWidth=700&originalType=binary&ratio=1&rotation=0&showTitle=false&size=182806&status=done&style=none&title=&width=272)  -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_12.png" width="300" height="auto"></p>
</section>
</section>
</section>
<section id="task1-reading-values-from-the-xyz-axes-of-the-three-axis-accelerometer" class="level2">
<h2 class="anchored" data-anchor-id="task1-reading-values-from-the-xyz-axes-of-the-three-axis-accelerometer">2.4.2 Task1: Reading Values from the XYZ Axes of the Three-Axis Accelerometer</h2>
<p>The key to using a three-axis accelerometer for project creation is learning how to read the values of the X, Y, Z axes of the accelerometer.</p>
<section id="add-the-seeed_arduino_lis3dhtr-library" class="level4">
<h4 class="anchored" data-anchor-id="add-the-seeed_arduino_lis3dhtr-library"><strong>Add the <a href="https://github.com/Seeed-Studio/Seeed_Arduino_LIS3DHTR">Seeed_Arduino_LIS3DHTR</a> Library</strong></h4>
<p>Before starting to program the Grove Three-Axis Accelerometer with the Arduino IDE, it is necessary to add the required library for the sensor. Enter the library address 🔗 <a href="https://github.com/Seeed-Studio/Seeed_Arduino_LIS3DHTR/" class="uri">https://github.com/Seeed-Studio/Seeed_Arduino_LIS3DHTR/</a> in the browser address bar, enter the GitHub page, click <code>Code→Download ZIP</code> to download the resource package <code>Seeed_Arduino_LIS3DHTR-master.zip</code> to local, as shown in the figure below.</p>
<!-- ![image.png](https://cdn.nlark.com/yuque/0/2022/png/2392200/1669369411558-c33d7e7f-c795-4ad0-80a3-82923a82a92e.png#averageHue=%237b813a&clientId=ue4dd1b2d-075a-4&from=paste&height=513&id=imK1V&originHeight=1025&originWidth=1496&originalType=binary&ratio=1&rotation=0&showTitle=false&size=268634&status=done&style=stroke&taskId=u3d48cc95-2ece-468a-bcdf-ff663f04a65&title=&width=748)  -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_13.png" class="img-fluid"></p>
<p>Add the previously downloaded resource package <code>Seeed_Arduino_LIS3DHTR-master.zip</code> through <code>Sketch→Include Library→Add .ZIP Library</code> in the menu bar, until you see a library load successful prompt.</p>
</section>
<section id="open-the-sample-file" class="level4">
<h4 class="anchored" data-anchor-id="open-the-sample-file"><strong>Open the Sample File</strong></h4>
<p>Similarly, you can refer to the library file and open the <code>LIS3DHTR_IIC</code> sample through the following path: <strong>File→Examples→Grove-3-Axis-Digital-Accelerometer-2g-to-16g-LIS3DHTR→LIS3DHTR_IIC.</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// This example use I2C.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">"LIS3DHTR.h"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Wire.h&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>LIS3DHTR<span class="op">&lt;</span>TwoWire<span class="op">&gt;</span> LIS<span class="op">;</span> <span class="co">//IIC</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define WIRE </span>Wire</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">115200</span><span class="op">);</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> <span class="op">(!</span>Serial<span class="op">)</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">};</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  LIS<span class="op">.</span>begin<span class="op">(</span>WIRE<span class="op">);</span> <span class="co">//IIC init dafault :0x18</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">//LIS.begin(WIRE, 0x19); //IIC init</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  LIS<span class="op">.</span>openTemp<span class="op">();</span>  <span class="co">//If ADC3 is used, the temperature detection needs to be turned off.</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.closeTemp();//default</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setFullScaleRange(LIS3DHTR_RANGE_2G);</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setFullScaleRange(LIS3DHTR_RANGE_4G);</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setFullScaleRange(LIS3DHTR_RANGE_8G);</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setFullScaleRange(LIS3DHTR_RANGE_16G);</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setOutputDataRate(LIS3DHTR_DATARATE_1HZ);</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setOutputDataRate(LIS3DHTR_DATARATE_10HZ);</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setOutputDataRate(LIS3DHTR_DATARATE_25HZ);</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  LIS<span class="op">.</span>setOutputDataRate<span class="op">(</span>LIS3DHTR_DATARATE_50HZ<span class="op">);</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setOutputDataRate(LIS3DHTR_DATARATE_100HZ);</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setOutputDataRate(LIS3DHTR_DATARATE_200HZ);</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setOutputDataRate(LIS3DHTR_DATARATE_1_6KHZ);</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  LIS.setOutputDataRate(LIS3DHTR_DATARATE_5KHZ);</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  LIS<span class="op">.</span>setHighSolution<span class="op">(</span><span class="kw">true</span><span class="op">);</span> <span class="co">//High solution enable</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(!</span>LIS<span class="op">)</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">"LIS3DHTR didn't connect."</span><span class="op">);</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>      <span class="op">;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">//3 axis</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  Serial.print("x:"); Serial.print(LIS.getAccelerationX()); Serial.print("  ");</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  Serial.print("y:"); Serial.print(LIS.getAccelerationY()); Serial.print("  ");</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">//  Serial.print("z:"); Serial.println(LIS.getAccelerationZ());</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  <span class="co">//ADC</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="co">//    Serial.print("adc1:"); Serial.println(LIS.readbitADC1());</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  <span class="co">//    Serial.print("adc2:"); Serial.println(LIS.readbitADC2());</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  <span class="co">//    Serial.print("adc3:"); Serial.println(LIS.readbitADC3());</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="co">//temperature</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"temp:"</span><span class="op">);</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  Serial<span class="op">.</span>println<span class="op">(</span>LIS<span class="op">.</span>getTemperature<span class="op">());</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  delay<span class="op">(</span><span class="dv">500</span><span class="op">);</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The sample program can read the values of the X, Y, Z axes of the three-axis accelerometer and output through the serial monitor. The sample program provides us with different setting choices using the “//” comment method, but you need to manually select the required parts, as follows: <br> <strong><code>LIS.begin(WIRE):</code></strong> initializes the default values, you can choose between 0×18 and 0×19, we need to choose <code>LIS.begin(WIRE,0×19);</code>. <br> <strong><code>LIS.setOutputDataRate(LIS3DHTR_DATARATE_50HZ):</code></strong> The accelerometer’s output rate has multiple choices, choose 50Hz. The three-axis accelerometer can also monitor the ambient temperature, we temporarily do not need to delete the related code, the complete program is as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// This example shows the 3-axis acceleration.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">"LIS3DHTR.h"</span><span class="pp"> </span><span class="co">// Declare library</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Wire.h&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>LIS3DHTR<span class="op">&lt;</span>TwoWire<span class="op">&gt;</span> LIS<span class="op">;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define WIRE </span>Wire<span class="pp"> </span><span class="co">// Initialize the module above using hardware I2C</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">9600</span><span class="op">);</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(!</span>Serial<span class="op">)</span> <span class="op">{</span> <span class="op">};</span> <span class="co">// If you can't open the serial monitor, the code will stop here</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    LIS<span class="op">.</span>begin<span class="op">(</span>WIRE<span class="op">,</span> <span class="bn">0x19</span><span class="op">);</span> <span class="co">// Initialize I2C with default value</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    LIS<span class="op">.</span>setOutputDataRate<span class="op">(</span>LIS3DHTR_DATARATE_50HZ<span class="op">);</span> <span class="co">// Set the accelerometer's output rate to 50Hz.</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>LIS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        Serial<span class="op">.</span>println<span class="op">(</span><span class="st">"LIS3DHTR didn't connect."</span><span class="op">);</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Read the values of the X, Y, Z axes from the sensor, and display them on the serial monitor</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"x:"</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>LIS<span class="op">.</span>getAccelerationX<span class="op">());</span> Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"  "</span><span class="op">);</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"y:"</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>LIS<span class="op">.</span>getAccelerationY<span class="op">());</span> Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"  "</span><span class="op">);</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"z:"</span><span class="op">);</span> Serial<span class="op">.</span>println<span class="op">(</span>LIS<span class="op">.</span>getAccelerationZ<span class="op">());</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">500</span><span class="op">);</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p>Get this program from Github <br> <a href="https://github.com/mouseart/XIAO-Mastering-Arduino-and-TinyML/tree/main/code/L10_LIS3DHTR_IIC_XIAO_en" class="uri">https://github.com/mouseart/XIAO-Mastering-Arduino-and-TinyML/tree/main/code/L10_LIS3DHTR_IIC_XIAO_en</a></p>
</blockquote>
<p>Next, connect the three-axis accelerometer to the I2C interface. There are two I2C interfaces on the XIAO expansion board, as shown in the picture below:</p>
<!-- ![页面_11.png](https://cdn.nlark.com/yuque/0/2021/png/2746511/1616037780780-31e00acd-095c-4e8e-9b1b-9fe5cde115ee.png#averageHue=%23c2bfba&height=814&id=PYHc5&originHeight=814&originWidth=1187&originalType=binary&ratio=1&rotation=0&showTitle=false&size=60922&status=done&style=none&title=&width=1187)  -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_14.png" class="img-fluid"></p>
</section>
<section id="monitor-data-changes-via-serial-monitor" class="level4">
<h4 class="anchored" data-anchor-id="monitor-data-changes-via-serial-monitor"><strong>Monitor Data Changes via Serial Monitor </strong></h4>
<p>Connect XIAO to your computer with a data cable, upload the program, wait for the program to upload successfully, then open the serial monitor. Move the three-axis accelerometer in the X, Y, Z axis direction and observe the changes in the readings.</p>
<!-- ![L0-企业微信20230526-180924\@2x.png](https://cdn.nlark.com/yuque/0/2023/png/2392200/1685095843412-eb6e56c6-de9e-4683-b9b1-267673d504c3.png#averageHue=%23c79260&clientId=u964be685-0da9-4&from=ui&id=uff3b3723&originHeight=1490&originWidth=2304&originalType=binary&ratio=2.5&rotation=0&showTitle=false&size=392866&status=done&style=stroke&taskId=u70a41b01-0b0a-4bce-a531-41163a9801a&title=)  -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_15.png" class="img-fluid"></p>
</section>
<section id="monitor-data-changes-with-serial-plotter" class="level4">
<h4 class="anchored" data-anchor-id="monitor-data-changes-with-serial-plotter"><strong>Monitor Data Changes with Serial Plotter </strong></h4>
<p>The numerical way of presenting the changes in the accelerometer’s 3-axis values is not very intuitive. You can open the serial plotter, as shown in the picture below.</p>
<!-- ![](https://cdn.nlark.com/yuque/0/2023/jpeg/2392200/1685096098894-5db8197f-6a0b-43b9-8bc3-8e919ae5aa1c.jpeg) -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_16.jpeg" class="img-fluid"></p>
</section>
</section>
<section id="project-production-rhythmic-dance" class="level2">
<h2 class="anchored" data-anchor-id="project-production-rhythmic-dance">2.4.3 Project Production: Rhythmic Dance</h2>
<section id="project-description" class="level3">
<h3 class="anchored" data-anchor-id="project-description">Project Description</h3>
<p>We can add an RGB LED strip in the project to achieve cool light effects changes. The three-axis accelerometer is used to detect movement, and different light effects are triggered based on different values on the X, Y, Z axes of the accelerometer.</p>
</section>
<section id="program-writing" class="level3">
<h3 class="anchored" data-anchor-id="program-writing">Program Writing</h3>
<p>To control the RGB LED strip to change the light effects via the three-axis accelerometer, follow these steps:</p>
<ul>
<li>Declare the library files that need to be invoked, define the strip pin and LED quantity.</li>
<li>Initialize the three-axis accelerometer and the strip.</li>
<li>Set the light effect of the strip to red, green and blue flashing, set the conditional judgment, and control the change by different value intervals on the X, Y, Z axis of the three-axis accelerometer.</li>
</ul>
</section>
<section id="task-control-rgb-led-strip-to-change-light-effects-via-three-axis-accelerometer" class="level3">
<h3 class="anchored" data-anchor-id="task-control-rgb-led-strip-to-change-light-effects-via-three-axis-accelerometer">Task: Control RGB LED Strip to Change Light Effects via Three-Axis Accelerometer</h3>
<p><strong>Step 1:</strong> Declare the library files that need to be invoked, define the strip pin and the number of LEDs.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">"LIS3DHTR.h"</span><span class="pp"> </span><span class="co">// Declare the library file of the three-axis accelerometer</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Adafruit_NeoPixel.h&gt;</span><span class="pp"> </span><span class="co">// Declare the strip's library file</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef __AVR__</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;avr/power.h&gt;</span><span class="pp"> </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Below are to initialize the module using software I2C or hardware I2C</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef SOFTWAREWIRE</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;SoftwareWire.h&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>SoftwareWire myWire<span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>LIS3DHTR<span class="op">&lt;</span>SoftwareWire<span class="op">&gt;</span> LIS<span class="op">;</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define WIRE </span>myWire</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Wire.h&gt;</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>LIS3DHTR<span class="op">&lt;</span>TwoWire<span class="op">&gt;</span> LIS<span class="op">;</span>    </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="pp">#define WIRE </span>Wire</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PIXEL_PIN </span><span class="dv">0</span><span class="pp"> </span><span class="co">// Define the pin of the strip, if you use XIAO RP2040/XIAO ESP32, please modify 0 to A0</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PIXEL_COUNT </span><span class="dv">30</span><span class="pp"> </span><span class="co">// Define the number of LEDs in the strip as 30</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>Adafruit_NeoPixel strip<span class="op">(</span>PIXEL_COUNT<span class="op">,</span> PIXEL_PIN<span class="op">,</span> NEO_GRB <span class="op">+</span> NEO_KHZ800<span class="op">);</span> <span class="co">// Declare the strip object, set the data type</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 2:</strong> Initialize the three-axis accelerometer and the strip. Here, you need to initialize the accelerometer and set the rate to 50HZ.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">9600</span><span class="op">);</span> <span class="co">// Initialize the serial monitor</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(!</span>Serial<span class="op">)</span> <span class="op">{};</span> <span class="co">// If the serial monitor isn't opened, the code will stop here, so please open the serial monitor</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    LIS<span class="op">.</span>begin<span class="op">(</span>WIRE<span class="op">,</span> <span class="bn">0x19</span><span class="op">);</span> <span class="co">// Initialize I2C</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    LIS<span class="op">.</span>setOutputDataRate<span class="op">(</span>LIS3DHTR_DATARATE_50HZ<span class="op">);</span> <span class="co">// Set the accelerometer's output rate to 50Hz</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    strip<span class="op">.</span>begin<span class="op">();</span> <span class="co">// Start the strip</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    strip<span class="op">.</span>show<span class="op">();</span> <span class="co">// Display the strip</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 3:</strong> Set the light effects to flash in red, green, and blue, respectively. Conditionals are used to change the color of the light strip according to the varying readings on the X, Y, and Z axes of the 3-axis accelerometer. These readings can be viewed via the serial monitor. By observing the change in values when the accelerometer is moved along the X, Y, and Z axes, we can determine the appropriate settings for the light strip. Since the readings may sometimes be negative, we take the absolute value of the readings. The <code>abs()</code> function can be used to get the absolute value, for example, <code>abs(LIS.getAccelerationX())</code> would give the absolute value of the reading on the X-axis.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>LIS<span class="op">)</span> <span class="op">{</span>  <span class="co">// Check if the 3-axis accelerometer is connected properly</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        Serial<span class="op">.</span>println<span class="op">(</span><span class="st">"LIS3DHTR didn't connect."</span><span class="op">);</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>abs<span class="op">(</span>LIS<span class="op">.</span>getAccelerationX<span class="op">())</span> <span class="op">&gt;</span> <span class="fl">0.2</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        theaterChase<span class="op">(</span>strip<span class="op">.</span>Color<span class="op">(</span><span class="dv">127</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">),</span> <span class="dv">50</span><span class="op">);</span> <span class="co">// The light strip turns red</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>abs<span class="op">(</span>LIS<span class="op">.</span>getAccelerationY<span class="op">())</span> <span class="op">&gt;</span> <span class="fl">0.2</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        theaterChase<span class="op">(</span>strip<span class="op">.</span>Color<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">127</span><span class="op">,</span> <span class="dv">0</span><span class="op">),</span> <span class="dv">50</span><span class="op">);</span> <span class="co">// The light strip turns green</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>abs<span class="op">(</span>LIS<span class="op">.</span>getAccelerationZ<span class="op">())</span> <span class="op">&gt;</span> <span class="fl">1.0</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        theaterChase<span class="op">(</span>strip<span class="op">.</span>Color<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">127</span><span class="op">),</span> <span class="dv">50</span><span class="op">);</span> <span class="co">// The light strip turns blue</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        strip<span class="op">.</span>clear<span class="op">();</span> </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        strip<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Read the values of the X, Y, and Z axes from the sensor and display them on the serial monitor</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"x:"</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>LIS<span class="op">.</span>getAccelerationX<span class="op">());</span> Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"  "</span><span class="op">);</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"y:"</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>LIS<span class="op">.</span>getAccelerationY<span class="op">());</span> Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"  "</span><span class="op">);</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"z:"</span><span class="op">);</span> Serial<span class="op">.</span>println<span class="op">(</span>LIS<span class="op">.</span>getAccelerationZ<span class="op">());</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">500</span><span class="op">);</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Set theaterChase for flashing light effects</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> theaterChase<span class="op">(</span><span class="dt">uint32_t</span> color<span class="op">,</span> <span class="dt">int</span> wait<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> a<span class="op">=</span><span class="dv">0</span><span class="op">;</span> a<span class="op">&lt;</span><span class="dv">10</span><span class="op">;</span> a<span class="op">++)</span> <span class="op">{</span>  </span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> b<span class="op">=</span><span class="dv">0</span><span class="op">;</span> b<span class="op">&lt;</span><span class="dv">3</span><span class="op">;</span> b<span class="op">++)</span> <span class="op">{</span> </span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>            strip<span class="op">.</span>clear<span class="op">();</span>   </span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> c<span class="op">=</span>b<span class="op">;</span> c<span class="op">&lt;</span>strip<span class="op">.</span>numPixels<span class="op">();</span> c <span class="op">+=</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>                strip<span class="op">.</span>setPixelColor<span class="op">(</span>c<span class="op">,</span> color<span class="op">);</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>            strip<span class="op">.</span>show<span class="op">();</span> </span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>            delay<span class="op">(</span>wait<span class="op">);</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Complete program as follows:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">"LIS3DHTR.h"</span><span class="co">// Declare the library file for the 3-axis accelerometer</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Adafruit_NeoPixel.h&gt;</span><span class="co">// Declare the library file for the light strip</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef __AVR__</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;avr/power.h&gt;</span><span class="pp"> </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">// The following is to initialize the module using software I2C or hardware I2C</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef SOFTWAREWIRE</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;SoftwareWire.h&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>SoftwareWire myWire<span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>LIS3DHTR<span class="op">&lt;</span>SoftwareWire<span class="op">&gt;</span> LIS<span class="op">;</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define WIRE </span>myWire</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Wire.h&gt;</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>LIS3DHTR<span class="op">&lt;</span>TwoWire<span class="op">&gt;</span> LIS<span class="op">;</span>    </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="pp">#define WIRE </span>Wire</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PIXEL_PIN </span><span class="dv">0</span><span class="pp"> </span><span class="co">// Define the pin of the light strip, if you are using XIAO RP2040/XIAO ESP32, please change 0 to A0</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PIXEL_COUNT </span><span class="dv">30</span><span class="pp"> </span><span class="co">// Define the number of LEDs on the light strip as 30</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>Adafruit_NeoPixel strip<span class="op">(</span>PIXEL_COUNT<span class="op">,</span> PIXEL_PIN<span class="op">,</span> NEO_GRB <span class="op">+</span> NEO_KHZ800<span class="op">);</span> <span class="co">// Declare the light strip object and set the data type</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span> </span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">9600</span><span class="op">);</span> <span class="co">// Initialize the serial monitor</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(!</span>Serial<span class="op">)</span> <span class="op">{};</span><span class="co">// If you do not open the serial monitor, the code will stop here, so please open the serial monitor</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    LIS<span class="op">.</span>begin<span class="op">(</span>WIRE<span class="op">,</span> <span class="bn">0x19</span><span class="op">);</span> <span class="co">// IIC initialization</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    LIS<span class="op">.</span>setOutputDataRate<span class="op">(</span>LIS3DHTR_DATARATE_50HZ<span class="op">);</span> <span class="co">// Set the output rate of the accelerometer to 50Hz</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    strip<span class="op">.</span>begin<span class="op">();</span> <span class="co">// The light strip starts working</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    strip<span class="op">.</span>show<span class="op">();</span> <span class="co">// The light strip displays</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>LIS<span class="op">)</span> <span class="op">{</span>  <span class="co">// Check if the 3-axis accelerometer is connected correctly</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>        Serial<span class="op">.</span>println<span class="op">(</span><span class="st">"LIS3DHTR didn't connect."</span><span class="op">);</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>abs<span class="op">(</span>LIS<span class="op">.</span>getAccelerationX<span class="op">())</span> <span class="op">&gt;</span> <span class="fl">0.2</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>        theaterChase<span class="op">(</span>strip<span class="op">.</span>Color<span class="op">(</span><span class="dv">127</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">),</span> <span class="dv">50</span><span class="op">);</span> <span class="co">// The light strip turns red</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>abs<span class="op">(</span>LIS<span class="op">.</span>getAccelerationY<span class="op">())</span> <span class="op">&gt;</span> <span class="fl">0.2</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>        theaterChase<span class="op">(</span>strip<span class="op">.</span>Color<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">127</span><span class="op">,</span> <span class="dv">0</span><span class="op">),</span> <span class="dv">50</span><span class="op">);</span> <span class="co">// The light strip turns green</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>abs<span class="op">(</span>LIS<span class="op">.</span>getAccelerationZ<span class="op">())</span> <span class="op">&gt;</span> <span class="fl">1.0</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>        theaterChase<span class="op">(</span>strip<span class="op">.</span>Color<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">127</span><span class="op">),</span> <span class="dv">50</span><span class="op">);</span> <span class="co">// The light strip turns blue</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>        strip<span class="op">.</span>clear<span class="op">();</span> </span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>        strip<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Read the values of the X, Y, and Z axes from the sensor and display them on the serial monitor</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"x:"</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>LIS<span class="op">.</span>getAccelerationX<span class="op">());</span> Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"  "</span><span class="op">);</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"y:"</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>LIS<span class="op">.</span>getAccelerationY<span class="op">());</span> Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"  "</span><span class="op">);</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"z:"</span><span class="op">);</span> Serial<span class="op">.</span>println<span class="op">(</span>LIS<span class="op">.</span>getAccelerationZ<span class="op">());</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">500</span><span class="op">);</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="co">// Set theaterChase for flashing light effects</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> theaterChase<span class="op">(</span><span class="dt">uint32_t</span> color<span class="op">,</span> <span class="dt">int</span> wait<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> a<span class="op">=</span><span class="dv">0</span><span class="op">;</span> a<span class="op">&lt;</span><span class="dv">10</span><span class="op">;</span> a<span class="op">++)</span> <span class="op">{</span>  </span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> b<span class="op">=</span><span class="dv">0</span><span class="op">;</span> b<span class="op">&lt;</span><span class="dv">3</span><span class="op">;</span> b<span class="op">++)</span> <span class="op">{</span> </span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>            strip<span class="op">.</span>clear<span class="op">();</span>   </span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> c<span class="op">=</span>b<span class="op">;</span> c<span class="op">&lt;</span>strip<span class="op">.</span>numPixels<span class="op">();</span> c <span class="op">+=</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>                strip<span class="op">.</span>setPixelColor<span class="op">(</span>c<span class="op">,</span> color<span class="op">);</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>            strip<span class="op">.</span>show<span class="op">();</span> </span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>            delay<span class="op">(</span>wait<span class="op">);</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p>Get this program from Github <br> <a href="https://github.com/mouseart/XIAO-Mastering-Arduino-and-TinyML/tree/main/code/L10_MovementRGBLED_XIAO_en" class="uri">https://github.com/mouseart/XIAO-Mastering-Arduino-and-TinyML/tree/main/code/L10_MovementRGBLED_XIAO_en</a></p>
</blockquote>
<p><strong>Step 4:</strong> Connect the hardware and upload the program. First, connect the RGB LED light strip to the <code>A0/D0</code> interface of the XIAO expansion board, and the three-axis accelerometer to the I2C interface, as shown in the figure:</p>
<!-- ![页面_12.png](https://cdn.nlark.com/yuque/0/2021/png/2746511/1616038044696-fb56da75-82b2-4519-a816-55b3a9126e02.png#averageHue=%23e8e6e3&height=1087&id=yULgw&originHeight=1087&originWidth=2458&originalType=binary&ratio=1&rotation=0&showTitle=false&size=80658&status=done&style=none&title=&width=2458)  -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_17.png" class="img-fluid"></p>
<p>Use a data cable to connect XIAO to your computer, click the “Upload” button in Arduino IDE, and upload the program to the hardware. Once the debugging area shows “Upload Successful”, you can open the serial monitor and try swinging the three-axis accelerometer left, right, up, and down to feel the light effect changes of the light strip.</p>
</section>
</section>
<section id="exterior-design" class="level2">
<h2 class="anchored" data-anchor-id="exterior-design">2.4.4 <strong>Exterior Design</strong></h2>
<p>Imagine how cool it would be if there were lights flashing with your dance steps as you passionately swing your arms. That’s where the inspiration for Rhythm Dance comes from. It can be combined with clothes or accessories to create a wearable style.</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Product Name</th>
<th>Rhythm Dance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Product Features</td>
<td>Wearable, Cool light effects, Posture detection</td>
</tr>
<tr class="even">
<td>Product Functions</td>
<td>RGB LED light strip displays different light effects based on the values detected by the three-axis accelerometer</td>
</tr>
<tr class="odd">
<td>Product Appearance</td>
<td>(For example: The waterproof layer on the outside of the RGB LED light strip can be removed, and it can be sewn together with clothes or a belt, etc.)</td>
</tr>
</tbody>
</table>
<section id="reference-for-the-case" class="level4">
<h4 class="anchored" data-anchor-id="reference-for-the-case"><strong>Reference for the case</strong></h4>
<!-- ![](https://cdn.nlark.com/yuque/0/2021/jpeg/2746511/1618369376903-a60faaea-f30e-40ef-944a-bf9a6c0e8d39.jpeg#averageHue=%23899486&from=drop&id=uf58f9c5d&originHeight=3024&originWidth=4032&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2649877&status=done&style=none&taskId=u2d38758e-03b6-4805-80b3-00a7a0619b9&title=)  -->
<p><img src="https://files.seeedstudio.com/wiki/XIAO_Big_Power-Board-ebook-photo/chapter_2-4/chapter_2-4_18.jpg" class="img-fluid"></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./chapter_2-3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">2.3 Surprise Gift Box Based on Light Sensor</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./chapter_3.html" class="pagination-link">
        <span class="nav-page-text">Chapter 3: Intermediate Project Practice - Complex Projects</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">XIAO: Big Power, Small Board</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>